<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

  <title>Hello, world!</title>
  <style>
    .pagination{
      display: flex;
    justify-content: space-around;
    width: 17%;
    }
    .pagination a{
      text-decoration: none;
      background-color: black;
      color: white;
      padding: 5px;
      border-radius: 5px;
    }
  </style>
</head>

<body>
  <%- include('partials/navbar') %>



  <div class="container mt-5 p-4 shadow-lg w-75">
    <h2 class="text-center">Client list</h2>  
    <table class="table table-hover">
      <thead>
        <tr>
          <th scope="col">index</th>
          <th scope="col">Client</th>
          <!-- <th scope="col">Data</th> -->
          <th scope="col">Sent</th>
          <th scope="col">Queue</th>
          <th scope="col">Operator</th>
          <th scope="col">Pending</th>
          <th scope="col">Last Update</th>
        </tr>
      </thead>
      <tbody>
        <% allUsersInDB.forEach((user, index)=> { %>
          <tr>
            <td><%= (currentPage - 1) * ITEMS_PER_PAGE + index + 1 %></td>
            <td>
              <%= user.clientSelect %>
            </td>
            <!-- <td>
              <%= user.data %>
            </td> -->
            <td>
              <% if (user.sent && typeof user.sent === 'number') { %>
                <%= user.sent.toLocaleString() %>
              <% } else if (user.sent) { %>
                <%= user.sent %>
              <% } else { %>
                N/A 
              <% } %>
            </td>
            <td>
              <% if (user.queue && typeof user.queue === 'number') { %>
                <%= user.queue.toLocaleString() %>
              <% } else if (user.queue) { %>
                <%= user.queue %>
              <% } else { %>
                N/A 
              <% } %>
            </td>
            <td>
              <%= user.selectbox %>
            </td>
            <td>
              <%= user.pending.toLocaleString() %>
            </td>
            <td>
              <%= new Date(user.createdAt).toLocaleString() %>
            </td>
          </tr>
        <% }); %>
      </tbody>
    </table>
    <div class="pagination">
      <% if (currentPage > 1) { %>
          <a href="/Queuereport?page=<%= currentPage - 1 %>">Previous</a>
      <% } %>
      <% if (allUsersInDB.length === ITEMS_PER_PAGE) { %>
          <a href="/Queuereport?page=<%= currentPage + 1 %>">Next</a>
      <% } %>
  </div>
    
  </div>
  

  












    
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
      integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
      crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js"
      integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
      crossorigin="anonymous"></script>
</body>

</html>